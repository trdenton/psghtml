<html>
<head>
<title>PSG chord explorer</title>
<script src='psg.js' type='text/javascript'></script>
<script type='text/javascript'>

NUM_FRETS = 24;
NUM_STRINGS = 10;

function fretboardCreate(psg) {
  const divFretboard = document.getElementById("fretboard");
  const body = document.body,
        tbl = document.createElement('table');
  tbl.style.width = '100px';
  tbl.style.border = '1px solid black';

  for (let str = 0; str < NUM_STRINGS; str++) {
    const tr = tbl.insertRow();
    for (let fret = 0; fret < NUM_FRETS+1; fret++) {
        const td = tr.insertCell();
        note = psg.getNoteAt(str, fret);
        td.appendChild(document.createTextNode(note.getName()));
        td.style.border = '1px solid black';
        // insert the nut
        if (fret == 0) {
            var nut = tr.insertCell();
            nut.appendChild(document.createTextNode(" "));
        }
    }
  }
  divFretboard.innerHTML = "";
  divFretboard.appendChild(tbl);
}

function fretboardUpdate() {
    var pedalA = document.getElementById("A").checked;
    var pedalB = document.getElementById("B").checked;
    var pedalC = document.getElementById("C").checked;
    var leverD = document.getElementById("D").checked;
    var leverE = document.getElementById("E").checked;
    var leverF = document.getElementById("F").checked;
    var leverG = document.getElementById("G").checked;

    pedalA ? document.psg.pedalPush("A") : document.psg.pedalRelease("A");
    pedalB ? document.psg.pedalPush("B") : document.psg.pedalRelease("B");
    pedalC ? document.psg.pedalPush("C") : document.psg.pedalRelease("C");
    leverD ? document.psg.pedalPush("D") : document.psg.pedalRelease("D");
    leverE ? document.psg.pedalPush("E") : document.psg.pedalRelease("E");
    leverF ? document.psg.pedalPush("F") : document.psg.pedalRelease("F");
    leverG ? document.psg.pedalPush("G") : document.psg.pedalRelease("G");

    fretboardCreate(document.psg);
}

document.addEventListener('DOMContentLoaded', function() {
    // Your JavaScript code to run on document load goes here
    document.psg = new PedalSteelGuitar();
    fretboardCreate(document.psg);
});

</script>
</head>
<body>
<div id="fretboard"></div>
<input type="checkbox" id="A" onclick="fretboardUpdate()">A</input>
<input type="checkbox" id="B" onclick="fretboardUpdate()">B</input>
<input type="checkbox" id="C" onclick="fretboardUpdate()">C</input>
       
         
<input type="checkbox" id="D" onclick="fretboardUpdate()">D</input>
<input type="checkbox" id="E" onclick="fretboardUpdate()">E</input>
<input type="checkbox" id="F" onclick="fretboardUpdate()">F</input>
<input type="checkbox" id="G" onclick="fretboardUpdate()">G</input>
<br/>
<select name="rootnote" onchange="fretboardUpdate()">
    <option value="C">C</option>
    <option value="C#">C#</option>
    <option value="D">D</option>
    <option value="D#">D#</option>
    <option value="E">E</option>
    <option value="F">F</option>
    <option value="F#">F#</option>
    <option value="G">G</option>
    <option value="G#">G#</option>
    <option value="A">A</option>
    <option value="A#">A#</option>
    <option value="B">B</option>
</select>
<br/>
<select name="chordtype" onchange="fretboardUpdate()">
    <option value="M">Maj</option>
    <option value="M7">Maj7</option>
    <option value="m">Min</option>
    <option value="m7">Min7</option>
    <option value="aug">Aug</option>
    <option value="dim">Dim</option>
    <option value="dim7">Dim7</option>
    <option value="dom7">Dom7</option>
</select>
</body>
<html>
